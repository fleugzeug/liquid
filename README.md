# Liquid Components

Experimental implementation of something similar to React's
[Composite Components](http://facebook.github.io/react/docs/multiple-components.html)

It is build in a way that it can support all different paradigms for view
rendering and mixing them all together:

## raw DOM Component

```dart
class TextInputEvent extends ComponentEvent {
  final String value;

  TextInputEvent(TextInputComponent target, this.value) : super(target);
}

class TextInputComponent extends Component {
  String value;

  TextInputComponent(Object key, ComponentBase parent,
      {Symbol className, this.value: ''})
      : super(parent, new InputElement(type: 'text'),
          key: key, className: className) {
    element.onInput.listen((_) {
      value = (element as InputElement).value;
      emit(new TextInputEvent(this, value));
    });
  }

  void updateProperties(String newValue) {
    if (value != newValue) {
      value = newValue;
      invalidate();
    }
  }

  /// should be auto-generated by Pub Transformer
  static VDomComponent virtual(Object key, ComponentBase parent,
                               {Symbol className, String value: ''}) {
    return new VDomComponent(key, (component) {
      if (component == null) {
        return new TextInputComponent(key, parent, value: value, className: className);
      } else {
        component.updateProperties(value);
        return component;
      }
    });
  }

  void render() {
    (element as InputElement).value = value;
  }

  void update() {
    (element as InputElement).value = value;
    super.update();
  }
}
```

## virtual DOM Component

```dart
class HelloComponent extends VComponent {
  String name;

  HelloComponent(ComponentBase parent, [this.name = 'Hello'])
      : super(parent, new DivElement());

  List<v.Node> build() {
    return [new v.Element(0, 'div', [new v.Text(0, 'Hello $name')])];
  }

  /// should be auto-generated by Pub Transformer
  void updateProperties(String newName) {
    if (name != newName) {
      name = newName;
      invalidate();
    }
  }

  /// should be auto-generated by Pub Transformer
  static VDomComponent virtual(Object key, ComponentBase parent,
                               [String name = 'Hello']) {
    return new VDomComponent(key, (component) {
      if (component == null) {
        return new HelloComponent(parent, name);
      } else {
        component.updateProperties(name);
        return component;
      }
    });
  }
}

main() {
  final updateLoop = new UpdateLoop();
  final root = new RootComponent(updateLoop);
  final hello = new HelloComponent(root, 'World');
  root.injectComponent(hello, querySelector('body'));
}
```

## templates+databinding